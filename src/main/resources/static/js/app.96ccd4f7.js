(function(e){function t(t){for(var a,i,n=t[0],l=t[1],u=t[2],d=0,h=[];d<n.length;d++)i=n[d],o[i]&&h.push(o[i][0]),o[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,n=1;n<r.length;n++){var l=r[n];0!==o[l]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},o={app:0},s=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var c=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"08c2":function(e,t,r){e.exports=r.p+"img/github-brands.ec5bc1b3.svg"},"5c0b":function(e,t,r){"use strict";var a=r("6879"),o=r.n(a);o.a},6879:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),o=r("bb71");r("da64"),r("d1e7");a["default"].use(o["a"],{iconfont:"md"});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-items",[a("v-btn",{attrs:{icon:""},on:{click:e.jumpToGithub}},[a("v-img",{attrs:{src:r("08c2"),contain:"",height:"34"}})],1)],1),a("v-toolbar-title",[a("div",{staticClass:"mt-1"},[e._v("BOOK MANAGER")])]),a("v-spacer")],1),a("v-content",[a("v-container",{staticClass:"container",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{"pt-3":"",xs12:""}},[a("v-card",{attrs:{color:"teal lighten-5"}},[a("v-card-text",{staticClass:"ma-0 pa-0"},[a("v-container",{staticClass:"container",attrs:{fluid:""}},[a("v-form",{ref:"searchForm",attrs:{"lazy-validation":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-around":""}},[a("v-flex",{attrs:{xs5:"",color:"grey"}},[a("v-text-field",{staticClass:"body-1",attrs:{label:"タイトル"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-autocomplete",{attrs:{items:e.authorItems,label:"著者"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:"","justify-space-around":""}},[a("v-flex",{attrs:{xs5:""}},[a("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社"}})],1),a("v-flex",{attrs:{xs5:""}},[a("v-btn",{staticClass:"mb-5 mr-5",attrs:{color:"teal darken-3",dark:"",absolute:"",bottom:"",right:"",fab:""}},[a("v-icon",[e._v("search")])],1)],1)],1)],1)],1)],1)],1)],1),a("transition-group",{staticClass:"animation-container",attrs:{name:"list",tag:"span"}},e._l(e.reversedBooks,function(t){return a("v-flex",{key:t.id,staticClass:"list-item",attrs:{"pt-3":"",xs12:""}},[a("v-card",{staticClass:"card",on:{click:function(r){return r.stopPropagation(),e.showUpdateDialog(t.id)}}},[a("v-card-title",[a("h1",[e._v(e._s(t.title))])]),a("v-card-text",[a("div",[e._v(e._s(t.author.name))]),a("div",[e._v(e._s(t.publisher.name))])])],1)],1)}),1)],1)],1),a("v-btn",{attrs:{color:"black",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.showInitDbDialog()}}},[e._v("!")]),a("v-btn",{staticClass:"mr-5",staticStyle:{"margin-left":"20px"},attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.showCreateDialog()}}},[e._v("+")]),a("v-dialog",{staticClass:"create-dialog",attrs:{"max-width":"500"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("新規登録")]),a("v-card-text",[a("v-form",{ref:"createForm",attrs:{"lazy-validation":""}},[a("v-text-field",{staticClass:"pb-1",attrs:{label:"タイトル",required:"",counter:20,error:e.createDialogError.title.hasError,"error-messages":e.createDialogError.title.messages},model:{value:e.newBook.title,callback:function(t){e.$set(e.newBook,"title",t)},expression:"newBook.title"}}),e.addNewAuthorCreate?e._e():a("v-autocomplete",{attrs:{items:e.authorItems,label:"著者",error:e.createDialogError.authorSelect.hasError,"error-messages":e.createDialogError.authorSelect.messages},model:{value:e.newBook.author.id,callback:function(t){e.$set(e.newBook.author,"id",t)},expression:"newBook.author.id"}}),e.addNewAuthorCreate?a("v-text-field",{attrs:{label:"著者を直接入力",required:"",counter:20,error:e.createDialogError.authorText.hasError,"error-messages":e.createDialogError.authorText.messages},model:{value:e.newBook.author.name,callback:function(t){e.$set(e.newBook.author,"name",t)},expression:"newBook.author.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noAuthorCreateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewAuthorCreate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewAuthorCreate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),e.addNewPublisherCreate?e._e():a("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社",error:e.createDialogError.publisherSelect.hasError,"error-messages":e.createDialogError.publisherSelect.messages},model:{value:e.newBook.publisher.id,callback:function(t){e.$set(e.newBook.publisher,"id",t)},expression:"newBook.publisher.id"}}),e.addNewPublisherCreate?a("v-text-field",{attrs:{label:"出版社を直接入力",required:"",counter:20,error:e.createDialogError.publisherText.hasError,"error-messages":e.createDialogError.publisherText.messages},model:{value:e.newBook.publisher.name,callback:function(t){e.$set(e.newBook.publisher,"name",t)},expression:"newBook.publisher.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noPublisherCreateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewPublisherCreate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewPublisherCreate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),a("br"),a("v-btn",{attrs:{color:"info"},on:{click:e.createBook}},[e._v("登録")])],1)],1)],1)],1),a("v-dialog",{staticClass:"update-dialog",attrs:{"max-width":"500"},model:{value:e.updateDialog,callback:function(t){e.updateDialog=t},expression:"updateDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("更新")]),a("v-card-text",[a("v-form",[a("v-text-field",{staticClass:"pb-1",attrs:{label:"タイトル",required:"",counter:20,error:e.updateDialogError.title.hasError,"error-messages":e.updateDialogError.title.messages},model:{value:e.selectedBook.title,callback:function(t){e.$set(e.selectedBook,"title",t)},expression:"selectedBook.title"}}),e.addNewAuthorUpdate?e._e():a("v-autocomplete",{attrs:{items:e.authorItems,label:"著者",error:e.updateDialogError.authorSelect.hasError,"error-messages":e.updateDialogError.authorSelect.messages},model:{value:e.selectedBook.author.id,callback:function(t){e.$set(e.selectedBook.author,"id",t)},expression:"selectedBook.author.id"}}),e.addNewAuthorUpdate?a("v-text-field",{attrs:{label:"著者を直接入力",required:"",counter:20,error:e.updateDialogError.authorText.hasError,"error-messages":e.updateDialogError.authorText.messages},model:{value:e.selectedBook.author.name,callback:function(t){e.$set(e.selectedBook.author,"name",t)},expression:"selectedBook.author.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noAuthorUpdateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewAuthorUpdate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewAuthorUpdate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),e.addNewPublisherUpdate?e._e():a("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社",error:e.updateDialogError.publisherSelect.hasError,"error-messages":e.updateDialogError.publisherSelect.messages},model:{value:e.selectedBook.publisher.id,callback:function(t){e.$set(e.selectedBook.publisher,"id",t)},expression:"selectedBook.publisher.id"}}),e.addNewPublisherUpdate?a("v-text-field",{attrs:{label:"出版社を直接入力",required:"",counter:20,error:e.updateDialogError.publisherText.hasError,"error-messages":e.updateDialogError.publisherText.messages},model:{value:e.selectedBook.publisher.name,callback:function(t){e.$set(e.selectedBook.publisher,"name",t)},expression:"selectedBook.publisher.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noPublisherUpdateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewPublisherUpdate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewPublisherUpdate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),a("br"),a("v-btn",{attrs:{color:"info"},on:{click:e.updateBook}},[e._v("更新")]),a("v-btn",{attrs:{color:"error"},on:{click:e.deleteBook}},[e._v("削除")])],1)],1)],1)],1),a("v-dialog",{staticClass:"init-db-dialog",attrs:{"max-width":"300"},model:{value:e.initDbDialog,callback:function(t){e.initDbDialog=t},expression:"initDbDialog"}},[a("v-card",[a("v-card-text",[a("p",[e._v("DB 初期化しますか？")]),a("v-btn",{attrs:{color:"info"},on:{click:e.initDb}},[e._v("YES")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.initDbDialog=!1}}},[e._v("NO")])],1)],1)],1)],1)],1)},i=[],n=(r("7f7f"),r("96cf"),r("3b8d")),l=(r("7514"),r("d225")),u=r("b0b4"),c=r("308d"),d=r("6bb5"),h=r("4e2b"),p=r("9ab4"),b=r("60a3"),f=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,null,[{key:"default",value:function(){return{id:null,title:"",author:{id:null,name:""},publisher:{id:null,name:""}}}},{key:"copy",value:function(e){return{id:e.id,title:e.title,author:{id:e.author.id,name:e.author.name},publisher:{id:e.publisher.id,name:e.publisher.name}}}}]),e}(),v=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,null,[{key:"default",value:function(){return{title:e.createDefaultApiError(),authorText:e.createDefaultApiError(),authorSelect:e.createDefaultApiError(),publisherText:e.createDefaultApiError(),publisherSelect:e.createDefaultApiError()}}},{key:"fromResponseErrors",value:function(t,r,a){var o=e.default(),s=t.find(function(e){return"title"===e.field});s?(o.title.hasError=!0,o.title.messages.push(s.message)):(o.title.hasError=!1,o.title.messages=[]);var i=t.find(function(e){return"author.validAuthorInput"===e.field});i?r?(o.authorText.hasError=!0,o.authorText.messages.push(i.message)):(o.authorSelect.hasError=!0,o.authorSelect.messages.push(i.message)):(o.authorText.hasError=!1,o.authorText.messages=[],o.authorSelect.hasError=!1,o.authorSelect.messages=[]);var n=t.find(function(e){return"publisher.validPublisherInput"===e.field});return n?a?(o.publisherText.hasError=!0,o.publisherText.messages.push(n.message)):(o.publisherSelect.hasError=!0,o.publisherSelect.messages.push(n.message)):(o.publisherText.hasError=!1,o.publisherText.messages=[],o.publisherSelect.hasError=!1,o.publisherSelect.messages=[]),o}},{key:"createDefaultApiError",value:function(){return{hasError:!1,messages:[]}}}]),e}(),g=r("bc3a"),m=r.n(g),k=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(c["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.books=[],e.authors=[],e.publishers=[],e.newBook=f.default(),e.createDialog=!1,e.addNewAuthorCreate=!1,e.addNewPublisherCreate=!1,e.createDialogError=v.default(),e.selectedBook=f.default(),e.updateDialog=!1,e.addNewAuthorUpdate=!1,e.addNewPublisherUpdate=!1,e.updateDialogError=v.default(),e.initDbDialog=!1,e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){var e=this;m.a.get("/api/book/initialize").then(function(t){e.books=t.data.books,e.authors=t.data.authors,e.publishers=t.data.publishers})}},{key:"showCreateDialog",value:function(){this.createDialogError=v.default(),this.createDialog=!0}},{key:"showUpdateDialog",value:function(e){this.updateDialogError=v.default();var t=this.books.find(function(t){return t.id===e});this.selectedBook=f.copy(t),this.updateDialog=!0}},{key:"showInitDbDialog",value:function(){this.initDbDialog=!0}},{key:"initDb",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/db/init");case 2:this.initDbDialog=!1,m.a.get("/api/book/initialize").then(function(e){t.books=e.data.books,t.authors=e.data.authors,t.publishers=e.data.publishers});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"createBook",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addNewAuthorCreate&&(this.newBook.author.id=null),this.addNewPublisherCreate&&(this.newBook.publisher.id=null),e.next=4,m.a.post("/api/book/create",this.newBook).then(function(e){var r=e.data.errors;r.length>0?t.createDialogError=v.fromResponseErrors(r,t.addNewAuthorCreate,t.addNewPublisherCreate):t.createDialog=!1});case 4:m.a.get("/api/book/get").then(function(e){t.books=e.data}),this.addNewAuthorCreate&&m.a.get("/api/book/getAuthors").then(function(e){t.authors=e.data,t.addNewAuthorCreate=!1}),this.addNewPublisherCreate&&m.a.get("/api/book/getPublishers").then(function(e){t.publishers=e.data,t.addNewPublisherCreate=!1});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updateBook",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addNewAuthorUpdate&&(this.selectedBook.author.id=null),this.addNewPublisherUpdate&&(this.selectedBook.publisher.id=null),e.next=4,m.a.post("/api/book/update",this.selectedBook).then(function(e){var r=e.data.errors;r.length>0?t.updateDialogError=v.fromResponseErrors(r,t.addNewAuthorUpdate,t.addNewPublisherUpdate):t.updateDialog=!1});case 4:m.a.get("/api/book/get").then(function(e){t.books=e.data}),this.addNewAuthorUpdate&&m.a.get("/api/book/getAuthors").then(function(e){t.authors=e.data,t.addNewAuthorUpdate=!1}),this.addNewPublisherUpdate&&m.a.get("/api/book/getPublishers").then(function(e){t.publishers=e.data,t.addNewPublisherUpdate=!1});case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteBook",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/book/delete",{id:this.selectedBook.id}).then(function(e){t.updateDialog=!1});case 2:return e.next=4,m.a.get("/api/book/get").then(function(e){t.books=e.data});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"jumpToGithub",value:function(){window.open("https://github.com/ahyaemon/book-manager","_blank")}},{key:"noAuthorCreateClicked",value:function(){this.addNewAuthorCreate=!this.addNewAuthorCreate,this.newBook.author.id=null,this.newBook.author.name=""}},{key:"noPublisherCreateClicked",value:function(){this.addNewPublisherCreate=!this.addNewPublisherCreate,this.newBook.publisher.id=null,this.newBook.publisher.name=""}},{key:"noAuthorUpdateClicked",value:function(){this.addNewAuthorUpdate=!this.addNewAuthorUpdate}},{key:"noPublisherUpdateClicked",value:function(){this.addNewPublisherUpdate=!this.addNewPublisherUpdate}},{key:"authorItems",get:function(){return this.authors.map(function(e){return{value:e.id,text:e.name}})}},{key:"publisherItems",get:function(){return this.publishers.map(function(e){return{value:e.id,text:e.name}})}},{key:"reversedBooks",get:function(){return this.books.reverse()}}]),t}(b["b"]);k=p["a"]([b["a"]],k);var w=k,x=w,D=(r("5c0b"),r("2877")),C=r("6544"),_=r.n(C),E=r("7496"),y=r("c6a6"),B=r("8336"),N=r("b0af"),A=r("99d9"),P=r("12b2"),T=r("a523"),U=r("549c"),j=r("169a"),O=r("0e8f"),S=r("4bd4"),V=r("132d"),I=r("adda"),R=r("a722"),$=r("9910"),q=r("2677"),F=r("71d9"),M=r("2a7f"),z=Object(D["a"])(x,s,i,!1,null,null,null),G=z.exports;_()(z,{VApp:E["a"],VAutocomplete:y["a"],VBtn:B["a"],VCard:N["a"],VCardText:A["a"],VCardTitle:P["a"],VContainer:T["a"],VContent:U["a"],VDialog:j["a"],VFlex:O["a"],VForm:S["a"],VIcon:V["a"],VImg:I["a"],VLayout:R["a"],VSpacer:$["a"],VTextField:q["a"],VToolbar:F["a"],VToolbarItems:M["a"],VToolbarTitle:M["b"]}),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(G)}}).$mount("#app")}});
//# sourceMappingURL=app.96ccd4f7.js.map