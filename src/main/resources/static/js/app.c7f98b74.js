(function(e){function t(t){for(var a,s,n=t[0],l=t[1],u=t[2],d=0,h=[];d<n.length;d++)s=n[d],o[s]&&h.push(o[s][0]),o[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,n=1;n<r.length;n++){var l=r[n];0!==o[l]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},o={app:0},i=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var u=0;u<n.length;u++)t(n[u]);var c=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"08c2":function(e,t,r){e.exports=r.p+"img/github-brands.ec5bc1b3.svg"},"5c0b":function(e,t,r){"use strict";var a=r("6879"),o=r.n(a);o.a},6879:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),o=r("bb71");r("da64"),r("d1e7");a["default"].use(o["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("v-toolbar",{attrs:{app:""}},[a("v-toolbar-items",[a("v-btn",{attrs:{icon:""},on:{click:e.jumpToGithub}},[a("v-img",{attrs:{src:r("08c2"),contain:"",height:"34"}})],1)],1),a("v-toolbar-title",[a("div",{staticClass:"mt-1"},[e._v("BOOK MANAGER")])]),a("v-spacer")],1),a("v-content",[a("v-container",{staticClass:"container",attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[e._l(e.books,function(t){return[a("v-flex",{attrs:{"pt-3":"",xs12:""}},[a("v-card",{staticClass:"card",on:{click:function(r){return r.stopPropagation(),e.showUpdateDialog(t.id)}}},[a("v-card-title",[a("h1",[e._v(e._s(t.title))])]),a("v-card-text",[a("div",[e._v(e._s(t.author.name))]),a("div",[e._v(e._s(t.publisher.name))])])],1)],1)]})],2)],1),a("v-btn",{attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.showCreateDialog()}}},[e._v("+")]),a("v-dialog",{staticClass:"create-dialog",attrs:{"max-width":"500"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("新規登録")]),a("v-card-text",[a("v-form",{ref:"createForm",attrs:{"lazy-validation":""}},[a("v-text-field",{staticClass:"pb-1",attrs:{label:"タイトル",required:"",counter:20,error:e.createDialogError.title.hasError,"error-messages":e.createDialogError.title.messages},model:{value:e.newBook.title,callback:function(t){e.$set(e.newBook,"title",t)},expression:"newBook.title"}}),e.addNewAuthorCreate?e._e():a("v-autocomplete",{attrs:{items:e.authorItems,label:"著者",error:e.createDialogError.authorSelect.hasError,"error-messages":e.createDialogError.authorSelect.messages},model:{value:e.newBook.author.id,callback:function(t){e.$set(e.newBook.author,"id",t)},expression:"newBook.author.id"}}),e.addNewAuthorCreate?a("v-text-field",{attrs:{label:"著者を直接入力",required:"",counter:20,error:e.createDialogError.authorText.hasError,"error-messages":e.createDialogError.authorText.messages},model:{value:e.newBook.author.name,callback:function(t){e.$set(e.newBook.author,"name",t)},expression:"newBook.author.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noAuthorCreateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewAuthorCreate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewAuthorCreate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),e.addNewPublisherCreate?e._e():a("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社",error:e.createDialogError.publisherSelect.hasError,"error-messages":e.createDialogError.publisherSelect.messages},model:{value:e.newBook.publisher.id,callback:function(t){e.$set(e.newBook.publisher,"id",t)},expression:"newBook.publisher.id"}}),e.addNewPublisherCreate?a("v-text-field",{attrs:{label:"出版社を直接入力",required:"",counter:20,error:e.createDialogError.publisherText.hasError,"error-messages":e.createDialogError.publisherText.messages},model:{value:e.newBook.publisher.name,callback:function(t){e.$set(e.newBook.publisher,"name",t)},expression:"newBook.publisher.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noPublisherCreateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewPublisherCreate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewPublisherCreate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),a("br"),a("v-btn",{attrs:{color:"info"},on:{click:e.createBook}},[e._v("登録")])],1)],1)],1)],1),a("v-dialog",{staticClass:"update-dialog",attrs:{"max-width":"500"},model:{value:e.updateDialog,callback:function(t){e.updateDialog=t},expression:"updateDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("更新")]),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{label:"タイトル",required:"",counter:20},model:{value:e.selectedBook.title,callback:function(t){e.$set(e.selectedBook,"title",t)},expression:"selectedBook.title"}}),e.addNewAuthorUpdate?e._e():a("v-autocomplete",{attrs:{items:e.authorItems,label:"著者を選択"},model:{value:e.selectedBook.author.id,callback:function(t){e.$set(e.selectedBook.author,"id",t)},expression:"selectedBook.author.id"}}),e.addNewAuthorUpdate?a("v-text-field",{attrs:{label:"著者を直接入力",required:"",counter:20},model:{value:e.selectedBook.author.name,callback:function(t){e.$set(e.selectedBook.author,"name",t)},expression:"selectedBook.author.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noAuthorUpdateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("arrow_upward")]),e.addNewAuthorUpdate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewAuthorUpdate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),e.addNewPublisherUpdate?e._e():a("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社を選択"},model:{value:e.selectedBook.publisher.id,callback:function(t){e.$set(e.selectedBook.publisher,"id",t)},expression:"selectedBook.publisher.id"}}),e.addNewPublisherUpdate?a("v-text-field",{attrs:{label:"出版社を直接入力",required:"",counter:20},model:{value:e.selectedBook.publisher.name,callback:function(t){e.$set(e.selectedBook.publisher,"name",t)},expression:"selectedBook.publisher.name"}}):e._e(),a("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noPublisherUpdateClicked}},[a("v-icon",{staticClass:"green--text pr-1"},[e._v("arrow_upward")]),e.addNewPublisherUpdate?e._e():a("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewPublisherUpdate?a("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),a("br"),a("v-btn",{attrs:{color:"info"},on:{click:e.updateBook}},[e._v("更新")]),a("v-btn",{attrs:{color:"error"},on:{click:e.deleteBook}},[e._v("削除")])],1)],1)],1)],1)],1)],1)},s=[],n=(r("96cf"),r("3b8d")),l=(r("7f7f"),r("7514"),r("d225")),u=r("b0b4"),c=r("308d"),d=r("6bb5"),h=r("4e2b"),p=r("9ab4"),b=r("60a3"),f=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,null,[{key:"createDefaultBook",value:function(){return{id:null,title:"",author:{id:null,name:""},publisher:{id:null,name:""}}}}]),e}(),v=function(){function e(){Object(l["a"])(this,e)}return Object(u["a"])(e,null,[{key:"createDefaultDialogError",value:function(){return{title:e.createDefaultApiError(),authorText:e.createDefaultApiError(),authorSelect:e.createDefaultApiError(),publisherText:e.createDefaultApiError(),publisherSelect:e.createDefaultApiError()}}},{key:"createDefaultApiError",value:function(){return{hasError:!1,messages:[]}}}]),e}(),g=r("bc3a"),k=r.n(g),m=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(c["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.books=[],e.authors=[],e.publishers=[],e.newBook=f.createDefaultBook(),e.createDialog=!1,e.addNewAuthorCreate=!1,e.addNewPublisherCreate=!1,e.createDialogError=v.createDefaultDialogError(),e.selectedBook=f.createDefaultBook(),e.updateDialog=!1,e.addNewAuthorUpdate=!1,e.addNewPublisherUpdate=!1,e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){var e=this;k.a.get("/api/book/initialize").then(function(t){e.books=t.data.books,e.authors=t.data.authors,e.publishers=t.data.publishers})}},{key:"showCreateDialog",value:function(e){this.createDialogError=v.createDefaultDialogError(),this.createDialog=!0}},{key:"showUpdateDialog",value:function(e){this.updateDialog=!0;var t=this.books.find(function(t){return t.id===e});this.selectedBook={id:t.id,title:t.title,author:{id:t.author.id,name:t.author.name},publisher:{id:t.publisher.id,name:t.publisher.name}}}},{key:"createBook",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addNewAuthorCreate&&(this.newBook.author.id=null),this.addNewPublisherCreate&&(this.newBook.publisher.id=null),e.next=4,k.a.post("/api/book/create",this.newBook).then(function(e){var r=e.data.errors;if(r.length>0){var a=r.find(function(e){return"title"===e.field});a?(t.createDialogError.title.hasError=!0,t.createDialogError.title.messages.push(a.message)):(t.createDialogError.title.hasError=!1,t.createDialogError.title.messages=[]);var o=r.find(function(e){return"author.validAuthorInput"===e.field});o?t.addNewAuthorCreate?(t.createDialogError.authorText.hasError=!0,t.createDialogError.authorText.messages.push(o.message)):(t.createDialogError.authorSelect.hasError=!0,t.createDialogError.authorSelect.messages.push(o.message)):(t.createDialogError.authorText.hasError=!1,t.createDialogError.authorText.messages=[],t.createDialogError.authorSelect.hasError=!1,t.createDialogError.authorSelect.messages=[]);var i=r.find(function(e){return"publisher.validPublisherInput"===e.field});i?t.addNewPublisherCreate?(t.createDialogError.publisherText.hasError=!0,t.createDialogError.publisherText.messages.push(i.message)):(t.createDialogError.publisherSelect.hasError=!0,t.createDialogError.publisherSelect.messages.push(i.message)):(t.createDialogError.publisherText.hasError=!1,t.createDialogError.publisherText.messages=[],t.createDialogError.publisherSelect.hasError=!1,t.createDialogError.publisherSelect.messages=[])}else t.createDialog=!1});case 4:return e.next=6,k.a.get("/api/book/get").then(function(e){t.books=e.data});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updateBook",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addNewAuthorUpdate&&(this.selectedBook.author.id=null),this.addNewPublisherUpdate&&(this.selectedBook.publisher.id=null),e.next=4,k.a.post("/api/book/update",this.selectedBook).then(function(e){t.updateDialog=!1});case 4:return e.next=6,k.a.get("/api/book/get").then(function(e){t.books=e.data});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteBook",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/book/delete",{id:this.selectedBook.id}).then(function(e){t.updateDialog=!1});case 2:return e.next=4,k.a.get("/api/book/get").then(function(e){t.books=e.data});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"jumpToGithub",value:function(){window.open("https://github.com/ahyaemon/book-manager","_blank")}},{key:"noAuthorCreateClicked",value:function(){this.addNewAuthorCreate=!this.addNewAuthorCreate,this.newBook.author.id=null,this.newBook.author.name=""}},{key:"noPublisherCreateClicked",value:function(){this.addNewPublisherCreate=!this.addNewPublisherCreate,this.newBook.publisher.id=null,this.newBook.publisher.name=""}},{key:"noAuthorUpdateClicked",value:function(){this.addNewAuthorUpdate=!this.addNewAuthorUpdate}},{key:"noPublisherUpdateClicked",value:function(){this.addNewPublisherUpdate=!this.addNewPublisherUpdate}},{key:"authorItems",get:function(){return this.authors.map(function(e){return{value:e.id,text:e.name}})}},{key:"publisherItems",get:function(){return this.publishers.map(function(e){return{value:e.id,text:e.name}})}}]),t}(b["b"]);m=p["a"]([b["a"]],m);var w=m,x=w,D=(r("5c0b"),r("2877")),E=r("6544"),C=r.n(E),B=r("7496"),_=r("c6a6"),y=r("8336"),N=r("b0af"),A=r("99d9"),P=r("12b2"),T=r("a523"),O=r("549c"),j=r("169a"),U=r("0e8f"),S=r("4bd4"),V=r("132d"),$=r("adda"),I=r("a722"),R=r("9910"),q=r("2677"),M=r("71d9"),F=r("2a7f"),G=Object(D["a"])(x,i,s,!1,null,null,null),z=G.exports;C()(G,{VApp:B["a"],VAutocomplete:_["a"],VBtn:y["a"],VCard:N["a"],VCardText:A["a"],VCardTitle:P["a"],VContainer:T["a"],VContent:O["a"],VDialog:j["a"],VFlex:U["a"],VForm:S["a"],VIcon:V["a"],VImg:$["a"],VLayout:I["a"],VSpacer:R["a"],VTextField:q["a"],VToolbar:M["a"],VToolbarItems:F["a"],VToolbarTitle:F["b"]}),a["default"].config.productionTip=!1,new a["default"]({render:function(e){return e(z)}}).$mount("#app")}});
//# sourceMappingURL=app.c7f98b74.js.map