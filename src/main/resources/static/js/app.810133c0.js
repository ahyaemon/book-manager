(function(e){function t(t){for(var r,i,l=t[0],n=t[1],u=t[2],d=0,h=[];d<l.length;d++)i=l[d],o[i]&&h.push(o[i][0]),o[i]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);c&&c(t);while(h.length)h.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,l=1;l<a.length;l++){var n=a[l];0!==o[n]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},o={app:0},s=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=n;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"08c2":function(e,t,a){e.exports=a.p+"img/github-brands.ec5bc1b3.svg"},"5c0b":function(e,t,a){"use strict";var r=a("6879"),o=a.n(r);o.a},6879:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),o=a("bb71");a("da64"),a("d1e7");r["default"].use(o["a"],{iconfont:"md"});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-toolbar",{attrs:{app:""}},[r("v-toolbar-items",[r("v-btn",{attrs:{icon:""},on:{click:e.jumpToGithub}},[r("v-img",{attrs:{src:a("08c2"),contain:"",height:"34"}})],1)],1),r("v-toolbar-title",[r("div",{staticClass:"mt-1"},[e._v("BOOK MANAGER")])]),r("v-spacer")],1),r("v-content",[r("v-container",{staticClass:"container",attrs:{fluid:""}},[r("v-layout",{attrs:{row:"",wrap:""}},[r("v-flex",{attrs:{"pt-3":"",xs12:""}},[r("v-card",{attrs:{color:"teal lighten-5"}},[r("v-card-text",{staticClass:"ma-0 pa-0"},[r("v-container",{staticClass:"container",attrs:{fluid:""}},[r("v-form",{ref:"searchForm",attrs:{"lazy-validation":""}},[r("v-layout",{attrs:{row:"",wrap:"","justify-space-around":""}},[r("v-flex",{attrs:{xs5:"",color:"grey"}},[r("v-text-field",{staticClass:"body-1",attrs:{label:"タイトル",counter:20},model:{value:e.searchCondition.title,callback:function(t){e.$set(e.searchCondition,"title",t)},expression:"searchCondition.title"}})],1),r("v-flex",{attrs:{xs5:""}},[r("v-autocomplete",{attrs:{items:e.authorItems,clearable:"",label:"著者"},model:{value:e.searchCondition.authorId,callback:function(t){e.$set(e.searchCondition,"authorId",t)},expression:"searchCondition.authorId"}})],1)],1),r("v-layout",{attrs:{row:"",wrap:"","justify-space-around":""}},[r("v-flex",{attrs:{xs5:""}},[r("v-autocomplete",{attrs:{items:e.publisherItems,clearable:"",label:"出版社"},model:{value:e.searchCondition.publisherId,callback:function(t){e.$set(e.searchCondition,"publisherId",t)},expression:"searchCondition.publisherId"}})],1),r("v-flex",{attrs:{xs5:""}},[r("v-btn",{staticClass:"mb-5 mr-5",attrs:{color:"teal darken-3",dark:"",absolute:"",bottom:"",right:"",fab:""},on:{click:e.searchBooks}},[r("v-icon",[e._v("search")])],1)],1)],1)],1)],1)],1)],1)],1),r("transition-group",{staticClass:"animation-container",attrs:{name:"list",tag:"span"}},e._l(e.reversedBooks,function(t){return r("v-flex",{key:t.id,staticClass:"list-item",attrs:{"pt-3":"",xs12:""}},[r("v-card",{staticClass:"card",on:{click:function(a){return a.stopPropagation(),e.showUpdateDialog(t.id)}}},[r("v-card-title",[r("h1",[e._v(e._s(t.title))])]),r("v-card-text",[r("div",[e._v(e._s(t.author.name))]),r("div",[e._v(e._s(t.publisher.name))])])],1)],1)}),1)],1)],1),r("v-btn",{attrs:{color:"black",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.showInitDbDialog()}}},[e._v("!")]),r("v-btn",{staticClass:"mr-5",staticStyle:{"margin-left":"20px"},attrs:{color:"pink",dark:"",fixed:"",bottom:"",right:"",fab:""},on:{click:function(t){return t.stopPropagation(),e.showCreateDialog()}}},[e._v("+")]),r("v-dialog",{staticClass:"create-dialog",attrs:{"max-width":"500"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("新規登録")]),r("v-card-text",[r("v-form",{ref:"createForm",attrs:{"lazy-validation":""}},[r("v-text-field",{staticClass:"pb-1",attrs:{label:"タイトル",required:"",counter:20,error:e.createDialogError.title.hasError,"error-messages":e.createDialogError.title.messages},model:{value:e.newBook.title,callback:function(t){e.$set(e.newBook,"title",t)},expression:"newBook.title"}}),e.addNewAuthorCreate?e._e():r("v-autocomplete",{attrs:{items:e.authorItems,label:"著者",error:e.createDialogError.authorSelect.hasError,"error-messages":e.createDialogError.authorSelect.messages},model:{value:e.newBook.author.id,callback:function(t){e.$set(e.newBook.author,"id",t)},expression:"newBook.author.id"}}),e.addNewAuthorCreate?r("v-text-field",{attrs:{label:"著者を直接入力",required:"",counter:20,error:e.createDialogError.authorText.hasError,"error-messages":e.createDialogError.authorText.messages},model:{value:e.newBook.author.name,callback:function(t){e.$set(e.newBook.author,"name",t)},expression:"newBook.author.name"}}):e._e(),r("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noAuthorCreateClicked}},[r("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewAuthorCreate?e._e():r("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewAuthorCreate?r("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),e.addNewPublisherCreate?e._e():r("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社",error:e.createDialogError.publisherSelect.hasError,"error-messages":e.createDialogError.publisherSelect.messages},model:{value:e.newBook.publisher.id,callback:function(t){e.$set(e.newBook.publisher,"id",t)},expression:"newBook.publisher.id"}}),e.addNewPublisherCreate?r("v-text-field",{attrs:{label:"出版社を直接入力",required:"",counter:20,error:e.createDialogError.publisherText.hasError,"error-messages":e.createDialogError.publisherText.messages},model:{value:e.newBook.publisher.name,callback:function(t){e.$set(e.newBook.publisher,"name",t)},expression:"newBook.publisher.name"}}):e._e(),r("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noPublisherCreateClicked}},[r("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewPublisherCreate?e._e():r("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewPublisherCreate?r("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),r("br"),r("v-btn",{attrs:{color:"info"},on:{click:e.createBook}},[e._v("登録")]),e.createDialogError.duplicated.hasError?r("span",{staticClass:"red--text"},[e._v(e._s(e.createDialogError.duplicated.messages[0]))]):e._e()],1)],1)],1)],1),r("v-dialog",{staticClass:"update-dialog",attrs:{"max-width":"500"},model:{value:e.updateDialog,callback:function(t){e.updateDialog=t},expression:"updateDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("更新")]),r("v-card-text",[r("v-form",[r("v-text-field",{staticClass:"pb-1",attrs:{label:"タイトル",required:"",counter:20,error:e.updateDialogError.title.hasError,"error-messages":e.updateDialogError.title.messages},model:{value:e.selectedBook.title,callback:function(t){e.$set(e.selectedBook,"title",t)},expression:"selectedBook.title"}}),e.addNewAuthorUpdate?e._e():r("v-autocomplete",{attrs:{items:e.authorItems,label:"著者",error:e.updateDialogError.authorSelect.hasError,"error-messages":e.updateDialogError.authorSelect.messages},model:{value:e.selectedBook.author.id,callback:function(t){e.$set(e.selectedBook.author,"id",t)},expression:"selectedBook.author.id"}}),e.addNewAuthorUpdate?r("v-text-field",{attrs:{label:"著者を直接入力",required:"",counter:20,error:e.updateDialogError.authorText.hasError,"error-messages":e.updateDialogError.authorText.messages},model:{value:e.selectedBook.author.name,callback:function(t){e.$set(e.selectedBook.author,"name",t)},expression:"selectedBook.author.name"}}):e._e(),r("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noAuthorUpdateClicked}},[r("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewAuthorUpdate?e._e():r("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewAuthorUpdate?r("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),e.addNewPublisherUpdate?e._e():r("v-autocomplete",{attrs:{items:e.publisherItems,label:"出版社",error:e.updateDialogError.publisherSelect.hasError,"error-messages":e.updateDialogError.publisherSelect.messages},model:{value:e.selectedBook.publisher.id,callback:function(t){e.$set(e.selectedBook.publisher,"id",t)},expression:"selectedBook.publisher.id"}}),e.addNewPublisherUpdate?r("v-text-field",{attrs:{label:"出版社を直接入力",required:"",counter:20,error:e.updateDialogError.publisherText.hasError,"error-messages":e.updateDialogError.publisherText.messages},model:{value:e.selectedBook.publisher.name,callback:function(t){e.$set(e.selectedBook.publisher,"name",t)},expression:"selectedBook.publisher.name"}}):e._e(),r("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.noPublisherUpdateClicked}},[r("v-icon",{staticClass:"green--text pr-1"},[e._v("help_outline")]),e.addNewPublisherUpdate?e._e():r("span",{staticClass:"green--text"},[e._v("直接入力に変更（選択肢に無い場合）")]),e.addNewPublisherUpdate?r("span",{staticClass:"green--text"},[e._v("選択肢に変更")]):e._e()],1),r("br"),r("v-btn",{attrs:{color:"info"},on:{click:e.updateBook}},[e._v("更新")]),r("v-btn",{attrs:{color:"error"},on:{click:e.deleteBook}},[e._v("削除")]),e.updateDialogError.duplicated.hasError?r("span",{staticClass:"red--text"},[e._v(e._s(e.updateDialogError.duplicated.messages[0]))]):e._e()],1)],1)],1)],1),r("v-dialog",{staticClass:"init-db-dialog",attrs:{"max-width":"300"},model:{value:e.initDbDialog,callback:function(t){e.initDbDialog=t},expression:"initDbDialog"}},[r("v-card",[r("v-card-text",[r("p",[e._v("DB を初期状態に戻しますか？")]),r("v-btn",{attrs:{color:"info"},on:{click:e.initDb}},[e._v("YES")]),r("v-btn",{attrs:{color:"error"},on:{click:function(t){e.initDbDialog=!1}}},[e._v("NO")])],1)],1)],1)],1)],1)},i=[],l=(a("7f7f"),a("96cf"),a("3b8d")),n=(a("7514"),a("d225")),u=a("b0b4"),c=a("308d"),d=a("6bb5"),h=a("4e2b"),p=a("9ab4"),b=a("60a3"),f=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,null,[{key:"default",value:function(){return{id:null,title:"",author:{id:null,name:""},publisher:{id:null,name:""}}}},{key:"copy",value:function(e){return{id:e.id,title:e.title,author:{id:e.author.id,name:e.author.name},publisher:{id:e.publisher.id,name:e.publisher.name}}}}]),e}(),v=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,null,[{key:"default",value:function(){return{title:e.createDefaultApiError(),authorText:e.createDefaultApiError(),authorSelect:e.createDefaultApiError(),publisherText:e.createDefaultApiError(),publisherSelect:e.createDefaultApiError(),duplicated:e.createDefaultApiError()}}},{key:"fromResponseErrors",value:function(t,a,r){var o=e.default(),s=t.find(function(e){return"title"===e.field});s?(o.title.hasError=!0,o.title.messages.push(s.message)):(o.title.hasError=!1,o.title.messages=[]);var i=t.find(function(e){return"author.validAuthorInput"===e.field});i?a?(o.authorText.hasError=!0,o.authorText.messages.push(i.message)):(o.authorSelect.hasError=!0,o.authorSelect.messages.push(i.message)):(o.authorText.hasError=!1,o.authorText.messages=[],o.authorSelect.hasError=!1,o.authorSelect.messages=[]);var l=t.find(function(e){return"publisher.validPublisherInput"===e.field});l?r?(o.publisherText.hasError=!0,o.publisherText.messages.push(l.message)):(o.publisherSelect.hasError=!0,o.publisherSelect.messages.push(l.message)):(o.publisherText.hasError=!1,o.publisherText.messages=[],o.publisherSelect.hasError=!1,o.publisherSelect.messages=[]);var n=t.find(function(e){return"duplicated"===e.field});return n?(o.duplicated.hasError=!0,o.duplicated.messages.push(n.message)):(o.duplicated.hasError=!1,o.duplicated.messages=[]),o}},{key:"createDefaultApiError",value:function(){return{hasError:!1,messages:[]}}}]),e}(),g=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,null,[{key:"default",value:function(){return{title:"",authorId:null,publisherId:null}}}]),e}(),m=a("bc3a"),k=a.n(m),w=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(c["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.books=[],e.authors=[],e.publishers=[],e.newBook=f.default(),e.createDialog=!1,e.addNewAuthorCreate=!1,e.addNewPublisherCreate=!1,e.createDialogError=v.default(),e.selectedBook=f.default(),e.updateDialog=!1,e.addNewAuthorUpdate=!1,e.addNewPublisherUpdate=!1,e.updateDialogError=v.default(),e.searchCondition=g.default(),e.initDbDialog=!1,e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"beforeMount",value:function(){var e=this;k.a.get("/api/book/initialize").then(function(t){e.books=t.data.books,e.authors=t.data.authors,e.publishers=t.data.publishers})}},{key:"showCreateDialog",value:function(){this.createDialogError=v.default(),this.createDialog=!0}},{key:"showUpdateDialog",value:function(e){this.updateDialogError=v.default();var t=this.books.find(function(t){return t.id===e});this.selectedBook=f.copy(t),this.updateDialog=!0}},{key:"showInitDbDialog",value:function(){this.initDbDialog=!0}},{key:"initDb",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/db/init");case 2:this.initDbDialog=!1,k.a.get("/api/book/initialize").then(function(e){t.books=e.data.books,t.authors=e.data.authors,t.publishers=e.data.publishers});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"createBook",value:function(){var e=this;this.addNewAuthorCreate?this.newBook.author.id=null:this.newBook.author.name="",this.addNewPublisherCreate?this.newBook.publisher.id=null:this.newBook.publisher.name="",k.a.post("/api/book/create",this.newBook).then(function(t){var a=t.data.errors;a.length>0?e.createDialogError=v.fromResponseErrors(a,e.addNewAuthorCreate,e.addNewPublisherCreate):(e.createDialog=!1,e.newBook=f.default(),k.a.get("/api/book/get").then(function(t){e.books=t.data}),e.addNewAuthorCreate&&k.a.get("/api/book/getAuthors").then(function(t){e.authors=t.data,e.addNewAuthorCreate=!1}),e.addNewPublisherCreate&&k.a.get("/api/book/getPublishers").then(function(t){e.publishers=t.data,e.addNewPublisherCreate=!1}))})}},{key:"updateBook",value:function(){var e=this;this.addNewAuthorUpdate?this.selectedBook.author.id=null:this.selectedBook.author.name="",this.addNewPublisherUpdate?this.selectedBook.publisher.id=null:this.selectedBook.publisher.name="",k.a.post("/api/book/update",this.selectedBook).then(function(t){var a=t.data.errors;a.length>0?e.updateDialogError=v.fromResponseErrors(a,e.addNewAuthorUpdate,e.addNewPublisherUpdate):(e.updateDialog=!1,k.a.get("/api/book/get").then(function(t){e.books=t.data}),e.addNewAuthorUpdate&&k.a.get("/api/book/getAuthors").then(function(t){e.authors=t.data,e.addNewAuthorUpdate=!1}),e.addNewPublisherUpdate&&k.a.get("/api/book/getPublishers").then(function(t){e.publishers=t.data,e.addNewPublisherUpdate=!1}))})}},{key:"searchBooks",value:function(){var e=this;k.a.get("/api/book/search",{params:this.searchCondition}).then(function(t){e.books=t.data})}},{key:"deleteBook",value:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("/api/book/delete",{id:this.selectedBook.id}).then(function(e){t.updateDialog=!1});case 2:return e.next=4,k.a.get("/api/book/get").then(function(e){t.books=e.data});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"jumpToGithub",value:function(){window.open("https://github.com/ahyaemon/book-manager","_blank")}},{key:"noAuthorCreateClicked",value:function(){this.addNewAuthorCreate=!this.addNewAuthorCreate}},{key:"noPublisherCreateClicked",value:function(){this.addNewPublisherCreate=!this.addNewPublisherCreate}},{key:"noAuthorUpdateClicked",value:function(){this.addNewAuthorUpdate=!this.addNewAuthorUpdate}},{key:"noPublisherUpdateClicked",value:function(){this.addNewPublisherUpdate=!this.addNewPublisherUpdate}},{key:"authorItems",get:function(){return this.authors.map(function(e){return{value:e.id,text:e.name}})}},{key:"publisherItems",get:function(){return this.publishers.map(function(e){return{value:e.id,text:e.name}})}},{key:"reversedBooks",get:function(){return this.books.reverse()}}]),t}(b["b"]);w=p["a"]([b["a"]],w);var x=w,C=x,D=(a("5c0b"),a("2877")),E=a("6544"),_=a.n(E),y=a("7496"),B=a("c6a6"),N=a("8336"),A=a("b0af"),P=a("99d9"),T=a("12b2"),U=a("a523"),j=a("549c"),O=a("169a"),S=a("0e8f"),I=a("4bd4"),V=a("132d"),$=a("adda"),R=a("a722"),q=a("9910"),M=a("2677"),F=a("71d9"),z=a("2a7f"),G=Object(D["a"])(C,s,i,!1,null,null,null),J=G.exports;_()(G,{VApp:y["a"],VAutocomplete:B["a"],VBtn:N["a"],VCard:A["a"],VCardText:P["a"],VCardTitle:T["a"],VContainer:U["a"],VContent:j["a"],VDialog:O["a"],VFlex:S["a"],VForm:I["a"],VIcon:V["a"],VImg:$["a"],VLayout:R["a"],VSpacer:q["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarItems:z["a"],VToolbarTitle:z["b"]}),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(J)}}).$mount("#app")}});
//# sourceMappingURL=app.810133c0.js.map